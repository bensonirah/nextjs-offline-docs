(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7051],{8809:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/basics/data-fetching/with-data",function(){return c(53613)}])},53613:function(a,b,c){"use strict";c.r(b),c.d(b,{meta:function(){return l},"default":function(){return n}});var d=c(24246),e=c(27378),f=c(65977),g=c(85416),h=c(24945);function i(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function j(a){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var l={title:"Pre-rendering and Data Fetching",courseId:"basics",lessonId:"data-fetching",stepId:"with-data",subtitle:"Static Generation with and without Data"},m={meta:l},n=function(a){"use strict";!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}(q,a);var b,c,e,n,o,p=(n=q,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b,c,d,e=j(n);if(o){var f=j(this).constructor;d=Reflect.construct(e,arguments,f)}else d=e.apply(this,arguments);return b=this,(c=d)&&("object"==((a=c)&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof c)?c:(function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a})(b)});function q(a){var b;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,q),(b=p.call(this,a)).layout=function(a){var b=a.children;return(0,d.jsx)(g.Z,{meta:l,children:b})},b}return b=q,c=[{key:"render",value:function(){var a=this.props,b=a.components,c=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,["components"]);return(0,d.jsxs)(f.XJ,{name:"wrapper",Layout:this.layout,layoutProps:Object.assign({},m,c),components:b,children:[(0,d.jsxs)(f.XJ,{name:"p",components:b,children:[(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"/docs/basic-features/pages#static-generation-recommended"},children:"Static Generation"})," can be done with and without data."]}),(0,d.jsx)(f.XJ,{name:"p",components:b,children:"So far, all the pages we’ve created do not require fetching external data. Those pages will automatically be statically generated when the app is built for production."}),(0,d.jsx)(h.Z,{shadow:!0,alt:"Static Generation without Data",oversize:!1,src:"/static/images/learn/data-fetching/static-generation-without-data.png",width:623,height:392}),(0,d.jsxs)(f.XJ,{name:"p",components:b,children:["However, for some pages, you might not be able to render the HTML without first fetching some external data. Maybe you need to access the file system, fetch external API, or query your database at build time. Next.js supports this case — ",(0,d.jsxs)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"https://nextjs.org/docs/basic-features/pages#static-generation-with-data"},children:["Static Generation ",(0,d.jsx)(f.XJ,{name:"strong",components:b,parentName:"a",children:"with data"})]})," — out of the box."]}),(0,d.jsx)(h.Z,{shadow:!0,alt:"Static Generation with Data",oversize:!1,src:"/static/images/learn/data-fetching/static-generation-with-data.png",width:623,height:525}),(0,d.jsxs)(f.XJ,{name:"h3",components:b,children:["Static Generation with Data using ",(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"h3",children:"getStaticProps"})]}),(0,d.jsxs)(f.XJ,{name:"p",components:b,children:["How does it work? Well, in Next.js, when you export a page component, you can also export an ",(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"p",children:"async"})," function called ",(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},children:(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"a",children:"getStaticProps"})}),". If you do this, then:"]}),(0,d.jsxs)(f.XJ,{name:"ul",components:b,children:[(0,d.jsxs)(f.XJ,{name:"li",components:b,parentName:"ul",children:[(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"li",props:{href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},children:(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"a",children:"getStaticProps"})})," runs at build time in production, and…"]}),(0,d.jsx)(f.XJ,{name:"li",components:b,parentName:"ul",children:"Inside the function, you can fetch external data and send it as props to the page."})]}),(0,d.jsx)(f.XJ,{name:"pre",components:b,props:{className:"language-jsx"},children:(0,d.jsxs)(f.XJ,{name:"code",components:b,parentName:"pre",props:{className:"language-jsx"},children:[(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword module"},children:"export"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword module"},children:"default"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword"},children:"function"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token function"},children:(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"span",props:{className:"token maybe-class-name"},children:"Home"})}),(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"("}),(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token parameter"},children:"props"}),(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:")"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"{"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token spread operator"},children:"..."})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"}"}),"\n\n",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword module"},children:"export"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword"},children:"async"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword"},children:"function"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token function"},children:"getStaticProps"}),(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"("}),(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:")"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"{"}),"\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token comment"},children:"// Get external data from the file system, API, DB, etc."}),"\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword"},children:"const"})," data ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token operator"},children:"="})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token spread operator"},children:"..."}),"\n\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token comment"},children:"// The value of the `props` key will be"}),"\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token comment"},children:"//  passed to the `Home` component"}),"\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token keyword"},children:"return"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"{"}),"\n    props",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:":"})," ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token spread operator"},children:"..."}),"\n  ",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"}"}),"\n",(0,d.jsx)(f.XJ,{name:"span",components:b,parentName:"code",props:{className:"token punctuation"},children:"}"}),"\n"]})}),(0,d.jsxs)(f.XJ,{name:"p",components:b,children:["Essentially, ",(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},children:(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"a",children:"getStaticProps"})})," allows you to tell Next.js: ",(0,d.jsx)(f.XJ,{name:"em",components:b,parentName:"p",children:"“Hey, this page has some data dependencies — so when you pre-render this page at build time, make sure to resolve them first!”"})]}),(0,d.jsx)(f.XJ,{name:"blockquote",components:b,children:(0,d.jsxs)(f.XJ,{name:"p",components:b,parentName:"blockquote",children:[(0,d.jsx)(f.XJ,{name:"strong",components:b,parentName:"p",children:"Note"}),": In development mode, ",(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},children:(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"a",children:"getStaticProps"})})," runs on each request instead."]})}),(0,d.jsxs)(f.XJ,{name:"h3",components:b,children:["Let’s Use ",(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"h3",children:"getStaticProps"})]}),(0,d.jsxs)(f.XJ,{name:"p",components:b,children:["It’s easier to learn by doing, so starting from the next page, we’ll use ",(0,d.jsx)(f.XJ,{name:"a",components:b,parentName:"p",props:{href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},children:(0,d.jsx)(f.XJ,{name:"inlineCode",components:b,parentName:"a",children:"getStaticProps"})})," to implement our blog."]})]})}}],i(b.prototype,c),e&&i(b,e),q}(e.Component);n.isMDXComponent=!0}},function(a){a.O(0,[7582,7879,6337,642,5315,5149,4945,9774,2888,179],function(){return a(a.s=8809)}),_N_E=a.O()}])